---
title: "How to Prioritization"
output:
  html_document:
    df_print: paged
date: "2023-09-13"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This markdown is created to document step by step the EHJV prioritization. 


#Step 0. Create a shapefile of the study area (EHJV) using the a shapefile from: https://geoscan.nrcan.gc.ca/starweb/geoscan/servlet.starweb?path=geoscan/downloade.web&search1=R=300911

```{r}
ecosh1<-terra::vect("./BCR_Terrestrial/BCR_Terrestrial_master.shp") #import shape file


ecosh3<-subset(ecosh1, ecosh1$COUNTRY %in% "CANADA")
ecosh3<-subset(ecosh3, ecosh3$PROVINCE_S%in% c("ONTARIO","QUEBEC","NEWFOUNDLAND", "NOVA SCOTIA", "PRINCE EDWARD ISLAND", "NEW BRUNSWICK"))
ecosh3<-subset(ecosh3, ecosh3$BCR%in% c(8,12,14))

plot (ecosh3)
```

```{r}

#save shapefile 

#writeVector(ecosh3, "C:/Angela/BAM_project/Zonation/EHJV/Inputs/EHJVsh.shp", overwrite=TRUE)

```


#Step 1.Clip the national models into the the desire study area 

I created the function [ClipMaps] (https://github.com/angelXmonster/Zonation_EHJV_Prioritization/blob/main/Step1/ClipMaps.R), which clip any raster based on a shapefile containing the study area. 

This function can clip rasters individually or it can be feed with the whole folder where are stored the rasters to be clipped.
(Read the description of the function for more information)

```{r}
#Runs each map
clipMaps ("C:/Angela/BAM_project/Zonation/EHJV/Inputs/6Species/birdRasterFiles/pred-BANS-CAN-Mean.tif", "C:/Angela/BAM_project/Zonation/EHJV/Inputs/EHJVshp/EHJVsh.shp", "C:/Angela/BAM_project/Zonation/EHJV/Inputs/6Species") 

clipMaps("C:/Angela/BAM_project/Zonation/EHJV/Inputs/AllSpecies/National_Models_26_08_2022", "C:/Angela/BAM_project/Zonation/EHJV/Inputs/EHJVshp_plusManitoba/EHJVsh.shp", "C:/Angela/BAM_project/Zonation/EHJV/Inputs/AllSpecies/birdRasterFilesEHJV") 
```

#Step 2. Create the conservation weights

In the Zonation Analyses the species were weighted by their conservation status: 
	5 = Schedule 1 listed species
	4 = Large decreases in population (PIF Pt.c* of 5)
	3 = Moderate decreases in populations (PIF Pt.c of 4)
	2= Priority species by BCR 
	1 = all other species
	
* PIF Pt.c score = North American population trend scores indicating vulnerability due to the direction and magnitude of recent changes in population size. 
* Pt.c score of 5 = Significant large decrease (pop'n change < -50%); 
  Pt.c score of 4 = Moderate to large decrease (pop'n change -15% to -50%)
  See more details in: https://pif.birdconservancy.org/acad.handbook.pdf

Note: For EHJV project I create another RMD file where I add conservation weights coming from PIF (). 

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
